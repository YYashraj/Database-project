<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Equipment Handling</title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
</head>
<body class="font-sans bg-white p-8">

    <h1 class="text-2xl font-bold mb-4">Equipment Handling</h1>

    <!-- Equipment Handling Dropdown -->
    <div class="mb-4">
        <label for="equipment-action" class="block text-sm font-medium text-gray-700">Equipment Action:</label>
        <form id="equipment-action" action="/equipmentaction" method="POST"><select name="option" onchange="this.form.submit()" class="form-select block w-full mt-1">
            <option value="" disabled selected>Select Action</option>
            <option value="issue">Issue</option>
            <option value="return">Return</option>
            <option value="view_history">View History</option>
        </select></form>
    </div>

    {% with messages = get_flashed_messages() %}
    {% if messages %}
    {% for message in messages %}
    <p class="text-red font-thin">{{ message }}</p>
    {% endfor %}
    {% endif %}
    {% endwith %}

    {% if a==1 %}
        <form id="selectclub" action="/selectclub" method="POST"><select name="option2" onchange="this.form.submit()" class="form-select block w-full mt-1">
            <option value="" disabled selected>Select Club</option>
            {% for club in data %}
            <option value="{{club[0]}}">{{club[0]}}</option>
            {% endfor %}
        </select></form>
    {% endif %}
    
    {% if a==2 %}
        <form id="issueing" action="/issueequipment" method="POST"><select name="option" class="form-select block w-full mt-1">
            <option value="">Select Equipment</option>
            {% for equip in equipments %}
            <option value="{{equip[0]}}">{{equip[0]}}</option>
            {% endfor %}
            <input type="text" id="sop" name="sop" placeholder="Enter Purpose">
            <button type="submit" class="btn btn-primary">ISSUE</button>
        </select></form>
    {% endif %}

    {% if a==4 %}
        <h1>Results</h1>
        <table>
            <thead>
                <tr>
                    <th>Roll Number</th>
                    <th>Equipment ID</th>
                    <th>Issue Time</th>
                    <th>Return Time</th>
                    <th>Purpose</th>
                </tr>
            </thead>
            <tbody>
                {% for row in data %}
                <tr>
                    <td>{{ row[0] }}</td>
                    <td>{{ row[1] }}</td>
                    <td>{{ row[2] }}</td>
                    <td>{{ row[3] }}</td>
                    <td>{{ row[4] }}</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    {% endif %}

    {% if a==5 %}
        <form id="returning" action="/returnequipment" method="POST"><select name="option" class="form-select block w-full mt-1">
            <option value="" disabled selected>Select Equipment</option>
            {% for equip in data %}
            <option value="{{equip[0]}}">{{equip[1]}}</option>
            {% endfor %}
            
        </select><button type="submit">Submit</button></form>
    {% endif %}
                <!-- `;
                clubSelect.onchange = function() {
                    // Equipment Select
                    const equipmentSelect = document.createElement('select');
                    equipmentSelect.id = 'equipment-list';
                    equipmentSelect.classList.add('form-select', 'block', 'w-full', 'mt-1');
                    equipmentSelect.innerHTML = `
                        <option value="">Select Equipment</option>
                        <option value="equipment1">Equipment 1</option>
                        <option value="equipment2">Equipment 2</option>
                        // Customize based on club
                    `;
                    dynamicContent.appendChild(equipmentSelect);
        
                    equipmentSelect.onchange = function() {
                        const equipment = this.value;
                        if (equipment) {
                            // Add Statement of Purpose Input
                            const purposeInput = document.createElement('input');
                            purposeInput.type = 'text';
                            purposeInput.placeholder = 'Enter Statement of Purpose';
                            purposeInput.classList.add('form-input', 'block', 'w-full', 'mt-1');
                            dynamicContent.appendChild(purposeInput);
        
                            // Submit and Cancel Buttons
                            addSubmitAndCancelButtons(dynamicContent);
                        }
                    };
                };
                dynamicContent.appendChild(clubSelect);
            }
            // Implement "Return" and "View History" functionality as needed
        });
        
        function addSubmitAndCancelButtons(container) {
            // Prevent duplicate buttons
            if (!document.getElementById('submit-btn') && !document.getElementById('cancel-btn')) {
                // Submit Button
                const submitButton = document.createElement('button');
                submitButton.id = 'submit-btn';
                submitButton.textContent = 'Submit';
                submitButton.classList.add('mt-4', 'bg-blue-500', 'text-white', 'font-bold', 'py-2', 'px-4', 'rounded', 'hover:bg-blue-700');
                submitButton.type = 'button';
        
                // Cancel Button
                const cancelButton = document.createElement('button');
                cancelButton.id = 'cancel-btn';
                cancelButton.textContent = 'Cancel';
                cancelButton.classList.add('mt-4', 'ml-2', 'bg-gray-500', 'text-white', 'font-bold', 'py-2', 'px-4', 'rounded', 'hover:bg-gray-700');
                cancelButton.type = 'button';
                cancelButton.onclick = function() {
                    container.innerHTML = ''; // Clear dynamic content
                };
        
                container.appendChild(submitButton);
                container.appendChild(cancelButton);
            }
        }
        </script> -->
        
</body>
</html>